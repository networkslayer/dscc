# 🔐 Step 2: Add Secrets to GitHub Repo
# Go to GitHub → Settings → Secrets and variables → Actions → New repository secret:
# Secret Name	Value
# SPARK_API_USER	admin
# SPARK_API_PASS	changeme
# Or use stronger secrets in production.
#

name: Run All Spark Tests

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  run-spark-tests:
    runs-on: ubuntu-latest

    steps:
      - name: Call Spark API to run all tests
        env:
          SPARK_API_USER: ${{ secrets.SPARK_API_USER }}
          SPARK_API_PASS: ${{ secrets.SPARK_API_PASS }}
        run: |
          echo "🔍 Triggering Spark detection tests..."
          curl -u "$SPARK_API_USER:$SPARK_API_PASS" -X POST http://<your-public-spark-api-host>:9000/run-all
